{"version":3,"sources":["app.ts"],"names":[],"mappings":"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","file":"app.c61986b1.js","sourceRoot":"..","sourcesContent":["type Store = {\n    currentPage: number\n    feeds: NewsFeed[] // NewsFeed 유형의 데이터가 들어가는 배열\n}\n\n// 중복 데이터 통합\ntype News = {\n    id: number\n    time_ago: string\n    title: string\n    url: string\n    user: string\n    content: string\n}\n\ntype NewsFeed = News & {\n    comments_count: number\n    points: number\n    read?: boolean // 있을 때도 있고, 없을 때도 있다.\n}\n\ntype NewsDetail = News & {\n    comments: NewsComment[]\n}\n\ntype NewsComment = News & {\n    comments: NewsComment[]\n    level: number\n}\n\n// ----------------------------------------------------------------------------------------------------\n\nconst AJAX: XMLHttpRequest = new XMLHttpRequest()\nconst CONTAINER: HTMLElement | null = document.getElementById('root')\n\nconst NEWS_URL = 'https://api.hnpwa.com/v0/news/1.json'\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/@id.json'\n\nconst store: Store = {\n    currentPage: 1,\n    feeds: [],\n}\n\nfunction getData<T>(url: string): T {\n    AJAX.open('GET', url, false) // false : 동기적으로 처리하겠다는 옵션\n    AJAX.send()\n\n    return JSON.parse(AJAX.response)\n}\nfunction makeFeeds(feeds: NewsFeed[]): NewsFeed[] {\n    for (let i = 0; i < feeds.length; i++) {\n        feeds[i].read = false\n    }\n    return feeds\n}\nfunction updateView(html: string): void {\n    if (CONTAINER !== null) {\n        CONTAINER.innerHTML = html\n    } else {\n        console.error('최상위 컨테이너가 없어 UI를 진행하지 못했습니다.')\n    }\n}\nfunction newsFeed(): void {\n    // 메인 페이지\n    let newsFeed: NewsFeed[] = store.feeds\n    const NEWSLIST = []\n\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\"> \n                            <h1 class=\"font-extrabold\">HACKER NEWS</h1>\n                        </div>\n                        <div class=\"items-center justify-end\">\n                            <a href=\"#/page/{{__prev_page__}}\" class=\"text-gray-500\">\n                                Previous\n                            </a>\n                            <a href=\"#/page/{{__next_page__}}\" class=\"text-gray-500 ml-4\">\n                                Next\n                            </a>\n                        </div>    \n                    </div>\n                </div>\n            </div>            \n            <div class=\"p-4 text-2xl text-gray-700\">\n                {{__news_feed__}}\n            </div>\n        </div>\n    `\n    // getData의 리턴 값이 2개이므로 제네릭을 사용하자.\n    if (newsFeed.length === 0) {\n        newsFeed = store.feeds = makeFeeds(getData<NewsFeed[]>(NEWS_URL))\n    }\n\n    for (let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++) {\n        NEWSLIST.push(`\n            <div class=\"p-6 ${\n                newsFeed[i].read ? 'bg-red-200' : 'bg-white'\n            } mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\n                <div class=\"flex\">\n                    <div class=\"flex-auto\">\n                        <a href=\"#/show/${newsFeed[i].id}\">\n                            ${newsFeed[i].title}\n                        </a>\n                    </div>\n                    <div class=\"text-center text-sm\">\n                        <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">\n                            (${newsFeed[i].comments_count})\n                        </div>\n                    </div>\n                </div>\n                <div class=\"flex mt-3\">\n                    <div class=\"grid grid-cols-3 text-sm text-gray-500\">\n                        <div>\n                            <i class=\"fas fa-user mr-1\"></i>${newsFeed[i].user}\n                        </div>\n                        <div>\n                            <i class=\"fas fa-heart mr-1\"></i>${newsFeed[i].points}\n                        </div>    \n                        <div>\n                            <i class=\"fas fa-clock mr-1\"></i>${newsFeed[i].time_ago}\n                        </div>        \n                    </div>\n                </div>\n            </div>\n        `)\n    }\n\n    template = template.replace('{{__news_feed__}}', NEWSLIST.join(''))\n    template = template.replace('{{__prev_page__}}', String(store.currentPage > 1 ? store.currentPage - 1 : 1))\n    template = template.replace('{{__next_page__}}', String(store.currentPage + 1))\n\n    updateView(template)\n}\nfunction newsDetail(): void {\n    const id = location.hash.substring(7) // 내가 쓰고 싶은 위치 값을 지정해주면 된다. 그 이후의 나머지 문자열들만 반환한다.\n    const NEWSCONTENT = getData<NewsDetail>(CONTENT_URL.replace('@id', id))\n\n    let template = `\n        <div class=\"bg-gray-600 min-h-screen pb-8\">\n            <div class=\"bg-white text-xl\">\n                <div class=\"mx-auto px-4\">\n                    <div class=\"flex justify-between items-center py-6\">\n                        <div class=\"flex justify-start\">\n                            <h1 class=\"font-extrabold\">\n                                HACKER NEWS\n                            </h1>\n                        </div>\n                        <div class=\"items-center justify-end\">\n                            <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\n                                <i class=\"fa fa-times\"></i>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"h-full border rounded-xl bg-white m-6 p-4\">\n                <h2>\n                    ${NEWSCONTENT.title}\n                </h2>\n                <div class=\"text-gray-400 h-20\">\n                    ${NEWSCONTENT.content}\n                </div>\n                {{__comments__}}\n            </div>\n        </div>\n    `\n\n    for (let i = 0; i < store.feeds.length; i++) {\n        if (store.feeds[i].id === Number(id)) {\n            store.feeds[i].read = true\n            break\n        }\n    }\n\n    updateView(template.replace('{{__comments__}}', makeComment(NEWSCONTENT.comments)))\n}\nfunction makeComment(comments: NewsComment[]): string {\n    const commentString = []\n\n    for (let i = 0; i < comments.length; i++) {\n        const comment: NewsComment = comments[i]\n\n        commentString.push(`\n            <div style=\"padding-left: ${comment.level * 40}px\" class=\"mt-4\">\n                <div class=\"text-gray-400\">\n                    <i class=\"fa fa-sort-up mr-2\"></i>\n                    <strong>${comment.user}</strong> ${comment.time_ago}\n                </div>\n                <p class=\"text-gray-700\">\n                    ${comment.content}\n                </p>\n            </div>\n        `)\n        // 재귀 호출\n        if (comment.comments.length > 0) {\n            commentString.push(makeComment(comment.comments))\n        }\n    }\n\n    return commentString.join('')\n}\nfunction router(): void {\n    const routePath = location.hash\n\n    // location.hash가 #만 있을 경우에는 빈 값을 반환한다.\n    // 따라서 true를 반환한다.\n    if (routePath === '') {\n        newsFeed()\n    } else if (routePath.indexOf('#/page/') >= 0) {\n        store.currentPage = Number(routePath.substring(7))\n        newsFeed()\n    } else {\n        newsDetail()\n    }\n}\n\nwindow.addEventListener('hashchange', router)\n\nrouter()\n"]}